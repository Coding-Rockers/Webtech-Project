<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Drive Smart Car Booking Form</title>
    
    <link rel="stylesheet" type="text/css" href="css/jquery-gallery.css">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=PT+Sans:400" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

	<link type="text/css" rel ="stylesheet" href = "css/styles.css">
	<link type="text/css" rel="stylesheet" href="css/style.css" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
        $(document).ready(function () {	
			$('#bookingForm').fadeIn(1500, function () {});
        });
    </script>

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	

</head>

<body>
	<nav>
        <div class ="logo"> 
            <a class="navbar-brand mr-4 nav-item nav-link" href="index.html">
                <img src="images/logo1.jpg" alt="A1 Telecom" width="120" height="90">
                </a>
       </div>
        <label for ="btn" class ="icon">
            <span class ="fa fa-bars"></span>
        </label>
        <div class="right"> 
			<h4 class="welcome" id="welcome_msg"></h4>
			<br>
			<ul style="z-index: 1000;">
				<li>
					<a href ="#">Book Vehicle</a>
					<ul>
						<li><a href ="car.html">Car</a></li>
						<li><a href ="suv.html">SUV</a></li>
						<li><a href ="van.html">Van</a></li>         
					</ul>     
				</li>
				<li>
					<a href = "/booking_form.html">Manage Bookings</a>
				</li>
				<li><a href ="Aboutus.html">About Us</a></li>
				<li><a href ="Contactus.html">Contact Us</a></li>
				<li><a href ="SignIn.html">SIGN IN / JOIN</a></li>
			</ul>
		</div>
    </nav>

	<div id="booking" class="section">
		<div class="section-center">
			<div class="container">
				<div class="row">
					<span class="text-red" id="booking_msg"></span>
					<div id="bookingForm" class="booking-form" style="display: none;">
						<form>
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<span class="form-label">Booking Reference</span>
										<input id="bookingref" class="form-control" type="text" placeholder="Booking reference">
									</div>
							</div>
							<div id="bookingDetails">
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Full Name</span>
											<input id="fullname" class="form-control" type="text" placeholder="Full Name" disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Car Name</span>
											<input id="carName" class="form-control" type="text" placeholder="Car name" disabled>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Pick-up</span>
											<input id="pickup_date" class="form-control" type="date" disabled>
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<span class="form-label">Return</span>
											<input id="return_date" class="form-control" type="date" disabled>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="col-md-2"></div>
									<div id="viewBookingbtn" class="col-md-8">
										<div class="form-btn">
											<input type="button" class="submit-btn" value="View Booking" onclick="viewBooking()"/>
										</div>
									</div>
								</div>

								<div class="col-md-12">
									<div id="modifyBookingbtn" class="col-md-6">
										<div class="form-btn">
											<input type="button" class="submit-btn" onclick="modifyBooking()" value="Change Dates"/>
										</div>
									</div>
									<div id="saveBookingbtn" class="col-md-6">
										<div class="form-btn">
											<input type="submit" class="submit-btn" onclick="saveBooking()" value="Save Changes"/>
										</div>
									</div>
									<div id="cancelBookingbtn" class="col-md-6">
										<div class="form-btn">
											<button class="submit-btn" onclick="cancelBooking()">Cancel Booking</button>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

<script>
	$(document).ready(function(){
		var fullname = sessionStorage.getItem('fullname');
		if(fullname != undefined || fullname != ""){
		$('#welcome_msg').html('Welcome ' + fullname);
		}
	});
</script>

<!-- <script>
    var booking_data = [{"12345qwerty":{booking_reference: "12345qwerty", fullname: "Mike Brown", pickup_date: new Date("2021-05-25").toISOString().slice(0, 10), hour: "2", minute: "00", am_pm: "PM", return_date: new Date("2021-05-31").toISOString().slice(0, 10)}},
						{"54321asdfgh":{booking_reference: "54321asdfgh", fullname: "Jane Richard", pickup_date: new Date("2021-04-17").toISOString().slice(0, 10), hour: "10", minute: "30", am_pm: "AM", return_date: new Date("2021-04-20").toISOString().slice(0, 10)}}
	];
</script> -->


<script>
	function viewBooking() {
		$('#booking_msg').html('');
		booked_car_data=JSON.parse(sessionStorage.getItem("booked_cardata"));
		if (booked_car_data){
			$("#bookingDetails").show(1500);
			document.getElementById("bookingref").value = booked_car_data["bookingref"];
			$('#bookingref').prop('disabled', true);
			document.getElementById("fullname").value = booked_car_data["fullName"];
			document.getElementById("carName").value = booked_car_data["carName"];
			document.getElementById("pickup_date").value = new Date(booked_car_data["pickupDate"]).toISOString().slice(0, 10);
			document.getElementById("return_date").value = new Date(booked_car_data["dropoffDate"]).toISOString().slice(0, 10);
			// document.getElementById("booking").style.backgroundImage = "url(booked_car_data['carImage'])";
			document.getElementById("booking").style.backgroundImage = "url(images/car-kia.jpg)";
			console.log(booked_car_data["carImage"]);

			document.getElementById("viewBookingbtn").style.display = "none";
			document.getElementById("modifyBookingbtn").style.display = "inline";
			document.getElementById("cancelBookingbtn").style.display = "inline";
		}
		else{
			$('#booking_msg').html('No Booking found!!')
		}	
	}

	function modifyBooking() {
		$('#booking_msg').html('');
		$('#pickup_date').prop('disabled', false);
		$('#return_date').prop('disabled', false);
		document.getElementById("modifyBookingbtn").style.display = "none";
		document.getElementById("saveBookingbtn").style.display = "inline";
	}

	function saveBooking() {
		$('#booking_msg').html('');
		var pickupDate = new Date($('#pickup_date').val());
		var dropoffDate = new Date($('#return_date').val());
		var bookingref = $('#bookingref').val();
		var carName = $('#carName').val();
		var fullName = $('#fullname').val();

		var booked_car_data = {bookingref:bookingref, fullName:fullName, carName:carName, pickupDate:pickupDate, dropoffDate:dropoffDate};
		sessionStorage.setItem('booked_cardata', JSON.stringify(booked_car_data));

		document.getElementById("booking_msg").style.color = "green";
		$('#booking_msg').html('Booking Modified!')
	}

	function cancelBooking() {
		$('#booking_msg').html('');
		sessionStorage.clear();
		document.getElementById("booking_msg").style.color = "red";
		$('#booking_msg').html('Booking Cancelled!')
	}
</script>

</body>

</html>
