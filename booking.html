<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Drive Smart Car Booking Form</title>
    
    <link rel="stylesheet" type="text/css" href="css/jquery-gallery.css">
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.ico">
	<link href="https://fonts.googleapis.com/css?family=PT+Sans:400" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

	<link type="text/css" rel ="stylesheet" href = "css/styles.css">
	<link type="text/css" rel="stylesheet" href="css/style.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>
	<nav>
        <div class ="logo"> 
            <a class="navbar-brand mr-4 nav-item nav-link" href="index.html">
                <img src="images/logo1.jpg" alt="A1 Telecom" width="120" height="90">
                </a>
       </div>
        <label for ="btn" class ="icon">
            <span class ="fa fa-bars"></span>
        </label>
        <div class="right"> 
			<h4 class="welcome">Welcome John</h4>
			<br>
			<ul style="z-index: 1000;">
				<li>
					<a href ="#">Book Vehicle</a>
					<ul>
						<li><a href ="#">Car</a></li>
						<li><a href ="#">SUV</a></li>
						<li><a href ="#">Van</a></li>         
					</ul>     
				</li>
				<li>
					<a href = "/booking_form.html">Bookings</a>
				</li>
				<li><a href ="#">About Us</a></li>
				<li><a href ="#">Contact Us</a></li>
				<li><a href ="#">SIGN IN / JOIN</a></li>
			</ul>
		</div>
    </nav>

	<div id="booking" class="section">
		<div class="section-center">
			<div class="container">
				<div class="row">
					<div class="booking-form">
						<form>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
										<span class="form-label" style="font-size: large;" id="car_name">Car Name</span>
										
									</div>
                                </div>
                            </div>
                        
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<span class="form-label">Full Name</span>
										<input class="form-control" type="text" placeholder="Full name" id="fullname" required>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<span class="form-label">Pick-up</span>
										<input class="form-control date_picker" type="date" id="pickup_date"  required>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label">Hour</span>
										<select class="form-control" id="pickup_hour">
											<option>1</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option>5</option>
											<option>6</option>
											<option>7</option>
											<option>8</option>
											<option>9</option>
											<option>10</option>
											<option>11</option>
											<option>12</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label">Minute</span>
										<select class="form-control" id="pickup_minute">
											<option>00</option>
											<option>05</option>
											<option>10</option>
											<option>15</option>
											<option>20</option>
											<option>25</option>
											<option>30</option>
											<option>35</option>
											<option>40</option>
											<option>45</option>
											<option>50</option>
											<option>55</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label" style="font-size:xx-small;">AM/PM</span>
										<select class="form-control" id="pickup_time">
											<option>AM</option>
											<option>PM</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
							</div>
                            <div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<span class="form-label">Drop-off</span>
										<input class="form-control date_picker" type="date" id="dropoff_date"  required>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label">Hour</span>
										<select class="form-control" id="dropoff_hour">
											<option>1</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option>5</option>
											<option>6</option>
											<option>7</option>
											<option>8</option>
											<option>9</option>
											<option>10</option>
											<option>11</option>
											<option>12</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label">Minute</span>
										<select class="form-control" id="dropoff_minute">
											<option>00</option>
											<option>05</option>
											<option>10</option>
											<option>15</option>
											<option>20</option>
											<option>25</option>
											<option>30</option>
											<option>35</option>
											<option>40</option>
											<option>45</option>
											<option>50</option>
											<option>55</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
								<div class="col-md-2">
									<div class="form-group">
										<span class="form-label" style="font-size:xx-small;">AM/PM</span>
										<select class="form-control" id="dropoff_time">
											<option>AM</option>
											<option>PM</option>
										</select>
										<span class="select-arrow"></span>
									</div>
								</div>
							</div>
                            <div id="dif">

                            </div>
							<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<span class="form-label"id="total_cost" style="text-transform: none;font-size: large;" ></span>
										<!-- <input class="form-control date_picker" type="text" id="total_cost" readonly required> -->
									</div>
								</div>
							</div>
							
							<div class="row">
								<div class="col-md-3">
                                    <!-- <button class="btn"  >Get Quote</button>
                                    <p id="diff"></p> -->
                                </div>
								<div class="col-md-3">
									<div class="form-btn">
										<input type="submit" class="submit-btn book" value="Book"/>
									</div>
								</div>
								<div class="col-md-3">
									<div class="form-btn">
										<button class="submit-btn">Cancel Booking</button>
									</div>
									
								</div>
								<div class="col-md-3"></div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT" crossorigin="anonymous"></script>
<script>
    $(document).ready(function(){
        car_data=JSON.parse(sessionStorage.getItem("current_booking_cardata"));
        var x=car_data["carname"];
		
		var cost,final,rate;
        document.getElementById('car_name').innerHTML=x;
		debugger;
                
        
        // $('.btn').on('click',function(){
        //     document.getElementById('diff').innerHTML=cost;
            
        // });

		
		$('.book').on('click',function(){
			var bookingref = Math.random().toString(36).substring(7);
			var fullName=$('#fullname').val();
			var carName=car_data["carname"];
			var carImage=car_data["carImage"];
			var finalCost=cost;
			var pickupDate=pickup_date;
			var dropoffDate=dropoff_date;
			var pickupHour=$('#pickup_hour').val();
			var pickupMinute=$('#pickup_minute').val();
			var pickupTime=$('#pickup_time').val();
			var dropoffHour=$('#dropoff_hour').val();
			var dropoffMinute=$('#dropoff_minute').val();
			var dropoffTime=$('#dropoff_time').val();
			var booked_car_data = {bookingref:bookingref,fullName:fullName,carName:carName,finalCost:finalCost,pickupDate:pickupDate,dropoffDate:dropoffDate,pickupHour:pickupHour,pickupMinute:pickupMinute,pickupTime:pickupTime,dropoffHour:dropoffHour,dropoffMinute:dropoffMinute,dropoffTime:dropoffTime,carImage:carImage };
			sessionStorage.setItem('booked_cardata', JSON.stringify(booked_car_data));
			window.location.replace("booking_form.html");

		});


        $('.date_picker').on('change',function(){
			pickup=$('#pickup_date').val();
			dropoff=$('#dropoff_date').val();
			if(pickup!=undefined && pickup!=null && pickup!="" && dropoff!=undefined && dropoff!=null && dropoff!=""){
			
				pickup_date=new Date(pickup);
				dropoff_date=new Date(dropoff);
				if(pickup_date<dropoff_date){
					//str1=pickup_date.split('-');
					// str2=dropoff_date.split('-');
					// t1=new Date(str1[2],str1[1],str1[0]);
					// t2=new Date(str2[2],str2[1],str2[0]);
					// pickup_date=new Date($('#pickup_date').val());
					// dropoff_date=new Date($('#dropoff_date').val());
					t1=pickup_date.getTime();
					t2=dropoff_date.getTime();
					var diff1=Math.abs(t2-t1);
					var millisecondsInADay = (1000 * 3600 * 24);
					var diffindays=diff1/millisecondsInADay;
					var diff=diffindays;
					var week=7;
					
					
					if(diffindays<7){
						
						rate=car_data["dailyrate"];
					}
					else if(diffindays<29){
						
						diff=diffindays/week;
						rate =car_data["weeklyrate"];
					}
					else{
						
						diff=diffindays/30;
						rate=car_data["monthlyrate"];
					}

					cost=(rate*diff).toFixed(2);
					final="Total Cost : $"+cost;
					document.getElementById('total_cost').innerHTML=final;
					
					//var diff=Math.abs(new Date($('#dropoff_date').val()).getTime()-new Date($('#pickup_date').val()).getTime())
					//document.getElementById('diff').innerHTML=cost;
						// diff=dropoff_date-pickup_date;

				}
				else{
					alert("Please select a valid drop-off date!!");
				}

			}

            
        });

    });
</script>
</body>

</html>